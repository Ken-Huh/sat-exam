{"ast":null,"code":"// LaTeX Renderer Utility using KaTeX\nimport katex from'katex';import'katex/dist/katex.min.css';/**\n * Render LaTeX expressions in text\n * Supports:\n * - $...$ for inline math\n * - $$...$$ for display math\n * - \\frac{a}{b} for fractions\n * - Common math notation\n *\n * @param {string} text - Text containing LaTeX expressions\n * @returns {string} - HTML string with rendered LaTeX\n */export function renderLatex(text){if(!text||typeof text!=='string')return text||'';let result=text;// Process display math first ($$...$$)\nresult=result.replace(/\\$\\$([^$]+)\\$\\$/g,(match,latex)=>{try{return katex.renderToString(latex.trim(),{displayMode:true,throwOnError:false,trust:true});}catch(e){console.error('KaTeX display error:',e);return match;}});// Process inline math ($...$)\nresult=result.replace(/\\$([^$]+)\\$/g,(match,latex)=>{try{return katex.renderToString(latex.trim(),{displayMode:false,throwOnError:false,trust:true});}catch(e){console.error('KaTeX inline error:',e);return match;}});return result;}/**\n * Auto-detect and convert common math patterns to LaTeX\n * This helps with questions that weren't written with LaTeX in mind\n *\n * @param {string} text - Text that may contain math expressions\n * @returns {string} - Text with math patterns converted to LaTeX\n */export function autoLatexify(text){if(!text||typeof text!=='string')return text||'';let result=text;// Convert fractions like 5/9 or (5/9) to LaTeX \\frac - but only standalone fractions\n// Avoids converting things like \"x/y\" when part of a larger expression\nresult=result.replace(/\\((\\d+)\\/(\\d+)\\)/g,'$\\\\frac{$1}{$2}$');// Convert standalone fractions like a/b where a and b are simple numbers\n// Be careful not to convert division in expressions\nresult=result.replace(/(?<![a-zA-Z\\d])(\\d+)\\/(\\d+)(?![a-zA-Z\\d])/g,'$\\\\frac{$1}{$2}$');// Convert x^2, x^20, etc. to LaTeX superscripts\nresult=result.replace(/(\\w)\\^(\\d+)/g,'$$$1^{$2}$$');result=result.replace(/(\\w)\\^(\\w)/g,'$$$1^{$2}$$');// Convert sqrt(x) to \\sqrt{x}\nresult=result.replace(/sqrt\\(([^)]+)\\)/gi,'$\\\\sqrt{$1}$');result=result.replace(/√\\(([^)]+)\\)/g,'$\\\\sqrt{$1}$');result=result.replace(/√(\\d+)/g,'$\\\\sqrt{$1}$');// Convert ± to LaTeX\nresult=result.replace(/±/g,'$\\\\pm$');// Convert ≤ and ≥\nresult=result.replace(/≤/g,'$\\\\leq$');result=result.replace(/≥/g,'$\\\\geq$');result=result.replace(/<=/g,'$\\\\leq$');result=result.replace(/>=/g,'$\\\\geq$');// Convert ≠\nresult=result.replace(/≠/g,'$\\\\neq$');result=result.replace(/!=/g,'$\\\\neq$');// Convert × to \\times\nresult=result.replace(/×/g,'$\\\\times$');// Convert ÷ to \\div\nresult=result.replace(/÷/g,'$\\\\div$');// Convert π to \\pi\nresult=result.replace(/π/g,'$\\\\pi$');return result;}/**\n * Combined function: auto-convert math patterns and render LaTeX\n *\n * @param {string} text - Text to process\n * @param {boolean} autoConvert - Whether to auto-convert common math patterns\n * @returns {string} - HTML string with rendered math\n */export function renderMathText(text){let autoConvert=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!text)return'';let processed=text;if(autoConvert){processed=autoLatexify(processed);}// Only call renderLatex if there are LaTeX delimiters\nif(processed.includes('$')){processed=renderLatex(processed);}return processed;}/**\n * Check if text contains any math expressions\n *\n * @param {string} text - Text to check\n * @returns {boolean} - True if text contains math patterns\n */export function hasMathContent(text){if(!text)return false;const mathPatterns=[/\\$[^$]+\\$/,// LaTeX delimiters\n/\\d+\\/\\d+/,// Fractions\n/\\w\\^\\d+/,// Exponents\n/sqrt\\(/i,// Square root\n/√/,// Square root symbol\n/[±≤≥≠×÷π]/// Math symbols\n];return mathPatterns.some(pattern=>pattern.test(text));}","map":{"version":3,"names":["katex","renderLatex","text","result","replace","match","latex","renderToString","trim","displayMode","throwOnError","trust","e","console","error","autoLatexify","renderMathText","autoConvert","arguments","length","undefined","processed","includes","hasMathContent","mathPatterns","some","pattern","test"],"sources":["/sessions/inspiring-great-wright/mnt/sat-mock-exam/src/utils/latexRenderer.js"],"sourcesContent":["// LaTeX Renderer Utility using KaTeX\nimport katex from 'katex';\nimport 'katex/dist/katex.min.css';\n\n/**\n * Render LaTeX expressions in text\n * Supports:\n * - $...$ for inline math\n * - $$...$$ for display math\n * - \\frac{a}{b} for fractions\n * - Common math notation\n *\n * @param {string} text - Text containing LaTeX expressions\n * @returns {string} - HTML string with rendered LaTeX\n */\nexport function renderLatex(text) {\n  if (!text || typeof text !== 'string') return text || '';\n\n  let result = text;\n\n  // Process display math first ($$...$$)\n  result = result.replace(/\\$\\$([^$]+)\\$\\$/g, (match, latex) => {\n    try {\n      return katex.renderToString(latex.trim(), {\n        displayMode: true,\n        throwOnError: false,\n        trust: true\n      });\n    } catch (e) {\n      console.error('KaTeX display error:', e);\n      return match;\n    }\n  });\n\n  // Process inline math ($...$)\n  result = result.replace(/\\$([^$]+)\\$/g, (match, latex) => {\n    try {\n      return katex.renderToString(latex.trim(), {\n        displayMode: false,\n        throwOnError: false,\n        trust: true\n      });\n    } catch (e) {\n      console.error('KaTeX inline error:', e);\n      return match;\n    }\n  });\n\n  return result;\n}\n\n/**\n * Auto-detect and convert common math patterns to LaTeX\n * This helps with questions that weren't written with LaTeX in mind\n *\n * @param {string} text - Text that may contain math expressions\n * @returns {string} - Text with math patterns converted to LaTeX\n */\nexport function autoLatexify(text) {\n  if (!text || typeof text !== 'string') return text || '';\n\n  let result = text;\n\n  // Convert fractions like 5/9 or (5/9) to LaTeX \\frac - but only standalone fractions\n  // Avoids converting things like \"x/y\" when part of a larger expression\n  result = result.replace(/\\((\\d+)\\/(\\d+)\\)/g, '$\\\\frac{$1}{$2}$');\n\n  // Convert standalone fractions like a/b where a and b are simple numbers\n  // Be careful not to convert division in expressions\n  result = result.replace(/(?<![a-zA-Z\\d])(\\d+)\\/(\\d+)(?![a-zA-Z\\d])/g, '$\\\\frac{$1}{$2}$');\n\n  // Convert x^2, x^20, etc. to LaTeX superscripts\n  result = result.replace(/(\\w)\\^(\\d+)/g, '$$$1^{$2}$$');\n  result = result.replace(/(\\w)\\^(\\w)/g, '$$$1^{$2}$$');\n\n  // Convert sqrt(x) to \\sqrt{x}\n  result = result.replace(/sqrt\\(([^)]+)\\)/gi, '$\\\\sqrt{$1}$');\n  result = result.replace(/√\\(([^)]+)\\)/g, '$\\\\sqrt{$1}$');\n  result = result.replace(/√(\\d+)/g, '$\\\\sqrt{$1}$');\n\n  // Convert ± to LaTeX\n  result = result.replace(/±/g, '$\\\\pm$');\n\n  // Convert ≤ and ≥\n  result = result.replace(/≤/g, '$\\\\leq$');\n  result = result.replace(/≥/g, '$\\\\geq$');\n  result = result.replace(/<=/g, '$\\\\leq$');\n  result = result.replace(/>=/g, '$\\\\geq$');\n\n  // Convert ≠\n  result = result.replace(/≠/g, '$\\\\neq$');\n  result = result.replace(/!=/g, '$\\\\neq$');\n\n  // Convert × to \\times\n  result = result.replace(/×/g, '$\\\\times$');\n\n  // Convert ÷ to \\div\n  result = result.replace(/÷/g, '$\\\\div$');\n\n  // Convert π to \\pi\n  result = result.replace(/π/g, '$\\\\pi$');\n\n  return result;\n}\n\n/**\n * Combined function: auto-convert math patterns and render LaTeX\n *\n * @param {string} text - Text to process\n * @param {boolean} autoConvert - Whether to auto-convert common math patterns\n * @returns {string} - HTML string with rendered math\n */\nexport function renderMathText(text, autoConvert = true) {\n  if (!text) return '';\n\n  let processed = text;\n\n  if (autoConvert) {\n    processed = autoLatexify(processed);\n  }\n\n  // Only call renderLatex if there are LaTeX delimiters\n  if (processed.includes('$')) {\n    processed = renderLatex(processed);\n  }\n\n  return processed;\n}\n\n/**\n * Check if text contains any math expressions\n *\n * @param {string} text - Text to check\n * @returns {boolean} - True if text contains math patterns\n */\nexport function hasMathContent(text) {\n  if (!text) return false;\n\n  const mathPatterns = [\n    /\\$[^$]+\\$/,           // LaTeX delimiters\n    /\\d+\\/\\d+/,            // Fractions\n    /\\w\\^\\d+/,             // Exponents\n    /sqrt\\(/i,             // Square root\n    /√/,                   // Square root symbol\n    /[±≤≥≠×÷π]/,          // Math symbols\n  ];\n\n  return mathPatterns.some(pattern => pattern.test(text));\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,0BAA0B,CAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAC,WAAWA,CAACC,IAAI,CAAE,CAChC,GAAI,CAACA,IAAI,EAAI,MAAO,CAAAA,IAAI,GAAK,QAAQ,CAAE,MAAO,CAAAA,IAAI,EAAI,EAAE,CAExD,GAAI,CAAAC,MAAM,CAAGD,IAAI,CAEjB;AACAC,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,kBAAkB,CAAE,CAACC,KAAK,CAAEC,KAAK,GAAK,CAC5D,GAAI,CACF,MAAO,CAAAN,KAAK,CAACO,cAAc,CAACD,KAAK,CAACE,IAAI,CAAC,CAAC,CAAE,CACxCC,WAAW,CAAE,IAAI,CACjBC,YAAY,CAAE,KAAK,CACnBC,KAAK,CAAE,IACT,CAAC,CAAC,CACJ,CAAE,MAAOC,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEF,CAAC,CAAC,CACxC,MAAO,CAAAP,KAAK,CACd,CACF,CAAC,CAAC,CAEF;AACAF,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,cAAc,CAAE,CAACC,KAAK,CAAEC,KAAK,GAAK,CACxD,GAAI,CACF,MAAO,CAAAN,KAAK,CAACO,cAAc,CAACD,KAAK,CAACE,IAAI,CAAC,CAAC,CAAE,CACxCC,WAAW,CAAE,KAAK,CAClBC,YAAY,CAAE,KAAK,CACnBC,KAAK,CAAE,IACT,CAAC,CAAC,CACJ,CAAE,MAAOC,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,qBAAqB,CAAEF,CAAC,CAAC,CACvC,MAAO,CAAAP,KAAK,CACd,CACF,CAAC,CAAC,CAEF,MAAO,CAAAF,MAAM,CACf,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAY,YAAYA,CAACb,IAAI,CAAE,CACjC,GAAI,CAACA,IAAI,EAAI,MAAO,CAAAA,IAAI,GAAK,QAAQ,CAAE,MAAO,CAAAA,IAAI,EAAI,EAAE,CAExD,GAAI,CAAAC,MAAM,CAAGD,IAAI,CAEjB;AACA;AACAC,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,mBAAmB,CAAE,kBAAkB,CAAC,CAEhE;AACA;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAE,kBAAkB,CAAC,CAEzF;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,cAAc,CAAE,aAAa,CAAC,CACtDD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,aAAa,CAAE,aAAa,CAAC,CAErD;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,mBAAmB,CAAE,cAAc,CAAC,CAC5DD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,eAAe,CAAE,cAAc,CAAC,CACxDD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,SAAS,CAAE,cAAc,CAAC,CAElD;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,QAAQ,CAAC,CAEvC;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,SAAS,CAAC,CACxCD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,SAAS,CAAC,CACxCD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,KAAK,CAAE,SAAS,CAAC,CACzCD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,KAAK,CAAE,SAAS,CAAC,CAEzC;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,SAAS,CAAC,CACxCD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,KAAK,CAAE,SAAS,CAAC,CAEzC;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,WAAW,CAAC,CAE1C;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,SAAS,CAAC,CAExC;AACAD,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,IAAI,CAAE,QAAQ,CAAC,CAEvC,MAAO,CAAAD,MAAM,CACf,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAa,cAAcA,CAACd,IAAI,CAAsB,IAApB,CAAAe,WAAW,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACrD,GAAI,CAAChB,IAAI,CAAE,MAAO,EAAE,CAEpB,GAAI,CAAAmB,SAAS,CAAGnB,IAAI,CAEpB,GAAIe,WAAW,CAAE,CACfI,SAAS,CAAGN,YAAY,CAACM,SAAS,CAAC,CACrC,CAEA;AACA,GAAIA,SAAS,CAACC,QAAQ,CAAC,GAAG,CAAC,CAAE,CAC3BD,SAAS,CAAGpB,WAAW,CAACoB,SAAS,CAAC,CACpC,CAEA,MAAO,CAAAA,SAAS,CAClB,CAEA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAE,cAAcA,CAACrB,IAAI,CAAE,CACnC,GAAI,CAACA,IAAI,CAAE,MAAO,MAAK,CAEvB,KAAM,CAAAsB,YAAY,CAAG,CACnB,WAAW,CAAY;AACvB,UAAU,CAAa;AACvB,SAAS,CAAc;AACvB,SAAS,CAAc;AACvB,GAAG,CAAoB;AACvB,WAAsB;AAAA,CACvB,CAED,MAAO,CAAAA,YAAY,CAACC,IAAI,CAACC,OAAO,EAAIA,OAAO,CAACC,IAAI,CAACzB,IAAI,CAAC,CAAC,CACzD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}