{"ast":null,"code":"// LaTeX Renderer Utility using KaTeX\nimport katex from'katex';import'katex/dist/katex.min.css';/**\n * Render a LaTeX expression to HTML using KaTeX\n * @param {string} latex - LaTeX expression\n * @param {boolean} displayMode - Whether to render in display mode\n * @returns {string} - HTML string\n */function renderKatex(latex){let displayMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{return katex.renderToString(latex.trim(),{displayMode,throwOnError:false,trust:true});}catch(e){console.error('KaTeX error:',e);return latex;}}/**\n * Render LaTeX expressions in text.\n * Supports:\n * - \\(...\\) for inline math\n * - \\[...\\] for display math\n * - $$...$$ for display math (legacy)\n *\n * IMPORTANT: We do NOT use $...$ delimiters because they conflict\n * with currency amounts (e.g., \"$8.00\") in question text.\n *\n * Unicode math characters (², ³, ≤, ≥, π, etc.) render natively\n * in the browser and do NOT need LaTeX conversion. Only use \\(...\\)\n * delimiters for complex expressions that need proper typesetting\n * (e.g., fractions, complex equations).\n *\n * @param {string} text - Text containing LaTeX expressions\n * @returns {string} - HTML string with rendered LaTeX\n */export function renderLatex(text){if(!text||typeof text!=='string')return text||'';let result=text;// Process display math: \\[...\\]\nresult=result.replace(/\\\\\\[([\\s\\S]*?)\\\\\\]/g,(match,latex)=>{return renderKatex(latex,true);});// Process display math: $$...$$ (legacy support)\nresult=result.replace(/\\$\\$([\\s\\S]*?)\\$\\$/g,(match,latex)=>{return renderKatex(latex,true);});// Process inline math: \\(...\\)\nresult=result.replace(/\\\\\\(([\\s\\S]*?)\\\\\\)/g,(match,latex)=>{return renderKatex(latex,false);});return result;}/**\n * Combined function: render any explicit LaTeX delimiters in text.\n * No auto-conversion is performed — Unicode math characters\n * (², ³, ≤, ≥, π, etc.) render natively in the browser.\n *\n * @param {string} text - Text to process\n * @param {boolean} autoConvert - Ignored (kept for API compatibility)\n * @returns {string} - HTML string with rendered math\n */export function renderMathText(text){let autoConvert=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!text)return'';// Only call renderLatex if there are explicit LaTeX delimiters\nif(text.includes('\\\\(')||text.includes('\\\\[')||text.includes('$$')){return renderLatex(text);}return text;}/**\n * Check if text contains any math expressions\n *\n * @param {string} text - Text to check\n * @returns {boolean} - True if text contains math patterns\n */export function hasMathContent(text){if(!text)return false;const mathPatterns=[/\\\\\\(.*?\\\\\\)/,// \\(...\\) delimiters\n/\\\\\\[.*?\\\\\\]/,// \\[...\\] delimiters\n/\\$\\$.*?\\$\\$/,// $$...$$ delimiters\n/[²³⁴⁵⁶⁷⁸⁹⁰¹]/,// Unicode superscripts\n/[±≤≥≠×÷π]/// Math symbols\n];return mathPatterns.some(pattern=>pattern.test(text));}","map":{"version":3,"names":["katex","renderKatex","latex","displayMode","arguments","length","undefined","renderToString","trim","throwOnError","trust","e","console","error","renderLatex","text","result","replace","match","renderMathText","autoConvert","includes","hasMathContent","mathPatterns","some","pattern","test"],"sources":["/sessions/adoring-focused-sagan/mnt/sat-mock-exam/src/utils/latexRenderer.js"],"sourcesContent":["// LaTeX Renderer Utility using KaTeX\nimport katex from 'katex';\nimport 'katex/dist/katex.min.css';\n\n/**\n * Render a LaTeX expression to HTML using KaTeX\n * @param {string} latex - LaTeX expression\n * @param {boolean} displayMode - Whether to render in display mode\n * @returns {string} - HTML string\n */\nfunction renderKatex(latex, displayMode = false) {\n  try {\n    return katex.renderToString(latex.trim(), {\n      displayMode,\n      throwOnError: false,\n      trust: true,\n    });\n  } catch (e) {\n    console.error('KaTeX error:', e);\n    return latex;\n  }\n}\n\n/**\n * Render LaTeX expressions in text.\n * Supports:\n * - \\(...\\) for inline math\n * - \\[...\\] for display math\n * - $$...$$ for display math (legacy)\n *\n * IMPORTANT: We do NOT use $...$ delimiters because they conflict\n * with currency amounts (e.g., \"$8.00\") in question text.\n *\n * Unicode math characters (², ³, ≤, ≥, π, etc.) render natively\n * in the browser and do NOT need LaTeX conversion. Only use \\(...\\)\n * delimiters for complex expressions that need proper typesetting\n * (e.g., fractions, complex equations).\n *\n * @param {string} text - Text containing LaTeX expressions\n * @returns {string} - HTML string with rendered LaTeX\n */\nexport function renderLatex(text) {\n  if (!text || typeof text !== 'string') return text || '';\n\n  let result = text;\n\n  // Process display math: \\[...\\]\n  result = result.replace(/\\\\\\[([\\s\\S]*?)\\\\\\]/g, (match, latex) => {\n    return renderKatex(latex, true);\n  });\n\n  // Process display math: $$...$$ (legacy support)\n  result = result.replace(/\\$\\$([\\s\\S]*?)\\$\\$/g, (match, latex) => {\n    return renderKatex(latex, true);\n  });\n\n  // Process inline math: \\(...\\)\n  result = result.replace(/\\\\\\(([\\s\\S]*?)\\\\\\)/g, (match, latex) => {\n    return renderKatex(latex, false);\n  });\n\n  return result;\n}\n\n/**\n * Combined function: render any explicit LaTeX delimiters in text.\n * No auto-conversion is performed — Unicode math characters\n * (², ³, ≤, ≥, π, etc.) render natively in the browser.\n *\n * @param {string} text - Text to process\n * @param {boolean} autoConvert - Ignored (kept for API compatibility)\n * @returns {string} - HTML string with rendered math\n */\nexport function renderMathText(text, autoConvert = false) {\n  if (!text) return '';\n\n  // Only call renderLatex if there are explicit LaTeX delimiters\n  if (text.includes('\\\\(') || text.includes('\\\\[') || text.includes('$$')) {\n    return renderLatex(text);\n  }\n\n  return text;\n}\n\n/**\n * Check if text contains any math expressions\n *\n * @param {string} text - Text to check\n * @returns {boolean} - True if text contains math patterns\n */\nexport function hasMathContent(text) {\n  if (!text) return false;\n\n  const mathPatterns = [\n    /\\\\\\(.*?\\\\\\)/,           // \\(...\\) delimiters\n    /\\\\\\[.*?\\\\\\]/,           // \\[...\\] delimiters\n    /\\$\\$.*?\\$\\$/,           // $$...$$ delimiters\n    /[²³⁴⁵⁶⁷⁸⁹⁰¹]/,        // Unicode superscripts\n    /[±≤≥≠×÷π]/,            // Math symbols\n  ];\n\n  return mathPatterns.some(pattern => pattern.test(text));\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,0BAA0B,CAEjC;AACA;AACA;AACA;AACA;AACA,GACA,QAAS,CAAAC,WAAWA,CAACC,KAAK,CAAuB,IAArB,CAAAC,WAAW,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CAC7C,GAAI,CACF,MAAO,CAAAJ,KAAK,CAACO,cAAc,CAACL,KAAK,CAACM,IAAI,CAAC,CAAC,CAAE,CACxCL,WAAW,CACXM,YAAY,CAAE,KAAK,CACnBC,KAAK,CAAE,IACT,CAAC,CAAC,CACJ,CAAE,MAAOC,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,cAAc,CAAEF,CAAC,CAAC,CAChC,MAAO,CAAAT,KAAK,CACd,CACF,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAY,WAAWA,CAACC,IAAI,CAAE,CAChC,GAAI,CAACA,IAAI,EAAI,MAAO,CAAAA,IAAI,GAAK,QAAQ,CAAE,MAAO,CAAAA,IAAI,EAAI,EAAE,CAExD,GAAI,CAAAC,MAAM,CAAGD,IAAI,CAEjB;AACAC,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAE,CAACC,KAAK,CAAEhB,KAAK,GAAK,CAC/D,MAAO,CAAAD,WAAW,CAACC,KAAK,CAAE,IAAI,CAAC,CACjC,CAAC,CAAC,CAEF;AACAc,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAE,CAACC,KAAK,CAAEhB,KAAK,GAAK,CAC/D,MAAO,CAAAD,WAAW,CAACC,KAAK,CAAE,IAAI,CAAC,CACjC,CAAC,CAAC,CAEF;AACAc,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAE,CAACC,KAAK,CAAEhB,KAAK,GAAK,CAC/D,MAAO,CAAAD,WAAW,CAACC,KAAK,CAAE,KAAK,CAAC,CAClC,CAAC,CAAC,CAEF,MAAO,CAAAc,MAAM,CACf,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAG,cAAcA,CAACJ,IAAI,CAAuB,IAArB,CAAAK,WAAW,CAAAhB,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CACtD,GAAI,CAACW,IAAI,CAAE,MAAO,EAAE,CAEpB;AACA,GAAIA,IAAI,CAACM,QAAQ,CAAC,KAAK,CAAC,EAAIN,IAAI,CAACM,QAAQ,CAAC,KAAK,CAAC,EAAIN,IAAI,CAACM,QAAQ,CAAC,IAAI,CAAC,CAAE,CACvE,MAAO,CAAAP,WAAW,CAACC,IAAI,CAAC,CAC1B,CAEA,MAAO,CAAAA,IAAI,CACb,CAEA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAO,cAAcA,CAACP,IAAI,CAAE,CACnC,GAAI,CAACA,IAAI,CAAE,MAAO,MAAK,CAEvB,KAAM,CAAAQ,YAAY,CAAG,CACnB,aAAa,CAAY;AACzB,aAAa,CAAY;AACzB,aAAa,CAAY;AACzB,cAAc,CAAS;AACvB,WAAwB;AAAA,CACzB,CAED,MAAO,CAAAA,YAAY,CAACC,IAAI,CAACC,OAAO,EAAIA,OAAO,CAACC,IAAI,CAACX,IAAI,CAAC,CAAC,CACzD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}